using System;
using System.Linq;

public class StudentRank
{
    public static void Main(string[] args)
    {
        // Get student grades with input validation.
        int numStudents = 5;
        int numSubjects = 3;
        int[,] studentGrades = new int[numStudents, numSubjects];

        for (int i = 0; i < numStudents; i++)
        {
            Console.WriteLine($"\nEnter grades for student {i + 1}:");
            for (int j = 0; j < numSubjects; j++)
            {
                Console.Write($"Subject {j + 1}: ");
                while (!int.TryParse(Console.ReadLine(), out studentGrades[i, j]) || studentGrades[i, j] < 0 || studentGrades[i, j] > 100)
                {
                    Console.WriteLine("Invalid grade. Please enter a number between 0 and 100.");
                }
            }
        }

        // Calculate total scores and ranks.
        Student[] students = CalculateTotalsAndRanks(studentGrades);

        // Display results.
        Console.WriteLine("\nStudent Results:");
        foreach (Student student in students)
        {
            Console.WriteLine($"Student {student.StudentID}: Total Score = {student.TotalScore}, Rank = {student.Rank}");
        }
    }


    static Student[] CalculateTotalsAndRanks(int[,] grades)
    {
        int numStudents = grades.GetLength(0);
        Student[] students = new Student[numStudents];

        for (int i = 0; i < numStudents; i++)
        {
            int total = 0;
            for (int j = 0; j < grades.GetLength(1); j++)
            {
                total += grades[i, j];
            }
            students[i] = new Student(i + 1, total);
        }

        //Sort students by total score in descending order.
        Array.Sort(students, (a, b) => b.TotalScore.CompareTo(a.TotalScore));

        // Assign ranks.
        for (int i = 0; i < numStudents; i++)
        {
            students[i].Rank = i + 1;
        }

        return students;
    }
}

//Helper class to represent student data.
class Student
{
    public int StudentID { get; set; }
    public int TotalScore { get; set; }
    public int Rank { get; set; }

    public Student(int studentID, int totalScore)
    {
        StudentID = studentID;
        TotalScore = totalScore;
    }
}